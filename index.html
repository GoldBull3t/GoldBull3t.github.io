<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meu Devocional NFC</title>
<style>
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
        transition: background 1s ease-in-out;
        color: white;
    }
    .container {
        background-color: rgba(0, 0, 0, 0.65);
        border-radius: 20px;
        padding: 25px;
        max-width: 600px;
        width: 100%;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        opacity: 0;
        animation: fadeIn 1.2s forwards;
    }
    @keyframes fadeIn { to { opacity: 1; } }
    
    #theme-title { font-size: 24px; margin-top: 0; margin-bottom: 5px; color: #ffeb3b; }
    #theme-subtitle { font-size: 16px; margin-bottom: 20px; opacity: 0.9; }

    #texto-versiculo { font-size: 21px; line-height: 1.6; font-style: italic; margin-bottom: 10px; text-align: left; }
    #referencia-versiculo { display: block; font-weight: bold; margin-bottom: 15px; font-size: 17px; }

    .button-group { margin: 20px 0; }
    button {
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-size: 15px;
        font-weight: bold;
        margin: 4px;
        transition: transform 0.2s, background-color 0.2s;
    }
    button:hover { transform: scale(1.05); }

    #share-button { background-color: #25D366; color: white; }
    #copy-button { background-color: #555; color: white; }
    #listen-button { background-color: #fd7e14; color: white; }

    .extra-section {
        background-color: rgba(255, 255, 255, 0.9);
        color: #333;
        border-radius: 10px;
        padding: 15px;
        margin-top: 15px;
        font-size: 15px;
        text-align: left;
    }
    .extra-section h3 { margin-top: 0; font-size: 17px; color: #0056b3; }
    
    #anotacoes { width: 100%; min-height: 60px; border: 1px solid #ccc; border-radius: 5px; padding: 8px; box-sizing: border-box; font-family: inherit; font-size: 14px; }
    
    .nav-buttons { display: flex; justify-content: space-between; margin-top: 20px; }
</style>
</head>
<body>

<div class="container">
    <h1 id="theme-title"></h1>
    <p id="theme-subtitle"></p>
    
    <p id="texto-versiculo" aria-live="polite"></p>
    <span id="referencia-versiculo" aria-live="polite"></span>

    <div class="button-group">
        <button id="listen-button">Ouvir</button>
        <button id="share-button">Partilhar</button>
        <button id="copy-button">Copiar</button>
    </div>
    
    <div id="devocional" class="extra-section"></div>
    
    <div class="extra-section">
        <h3>Minhas Anotações</h3>
        <textarea id="anotacoes" placeholder="Escreva aqui sua reflexão ou oração pessoal..."></textarea>
    </div>
    
    <div class="nav-buttons">
        <button id="prev-day-button">&lt; Dia Anterior</button>
        <button id="next-day-button">Próximo Dia &gt;</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const temas = [
        {
            titulo: "Semana da Gratidão",
            descricao: "Um convite para cultivar um coração grato.",
            dias: [
                { arc: { texto: "Em tudo dai graças...", ref: "1 Tessalonicenses 5:18", devocional: "A gratidão deve ser um estilo de vida, não um sentimento ocasional.", oracao: "Senhor, ajuda-me a ser grato em todas as circunstâncias." } },
                { arc: { texto: "Rendei graças ao Senhor, porque ele é bom...", ref: "Salmos 107:1", devocional: "A bondade de Deus é o maior motivo para a nossa gratidão.", oracao: "Pai, obrigado pela Tua infinita bondade e amor." } },
                // ... mais 5 dias para completar a semana
            ]
        },
        {
            titulo: "Semana do Perdão",
            descricao: "Aprendendo a liberar e receber o perdão.",
            dias: [
                { arc: { texto: "Suportando-vos uns aos outros e perdoando-vos...", ref: "Colossenses 3:13", devocional: "Assim como Cristo nos perdoou, devemos perdoar os outros.", oracao: "Senhor, dá-me um coração perdoador, como o Teu." } },
                // ... mais 6 dias
            ]
        }
        // Adicione mais temas semanais aqui
    ];

    const textoElem = document.getElementById('texto-versiculo');
    const referenciaElem = document.getElementById('referencia-versiculo');
    const devocionalElem = document.getElementById('devocional');
    const anotacoesElem = document.getElementById('anotacoes');
    const listenButton = document.getElementById('listen-button');
    const copyButton = document.getElementById('copy-button');

    let currentDayOfYear = (new Date() - new Date(new Date().getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24);
    let displayDay = Math.floor(currentDayOfYear);

    function getConteudoDoDia(dia) {
        const diaAbsoluto = Math.floor(dia) - 1;
        const totalDias = temas.flatMap(t => t.dias).length;
        const indiceDia = diaAbsoluto % totalDias;
        
        let acumulado = 0;
        for (const tema of temas) {
            if (indiceDia < acumulado + tema.dias.length) {
                const indiceNoTema = indiceDia - acumulado;
                return { tema, conteudo: tema.dias[indiceNoTema].arc };
            }
            acumulado += tema.dias.length;
        }
    }

    function mostrarConteudo(dia) {
        const { tema, conteudo } = getConteudoDoDia(dia);
        
        document.getElementById('theme-title').textContent = tema.titulo;
        document.getElementById('theme-subtitle').textContent = tema.descricao;
        
        textoElem.textContent = `"${conteudo.texto}"`;
        referenciaElem.textContent = conteudo.ref;
        devocionalElem.innerHTML = `<h3>Reflexão & Oração</h3><p>${conteudo.devocional}<br><br><strong>Oração:</strong> ${conteudo.oracao}</p>`;

        // Carregar anotação salva para este dia
        const anotacaoSalva = localStorage.getItem(`anotacao_${dia}`);
        anotacoesElem.value = anotacaoSalva || '';
        
        // Define a ação do botão de ouvir
        listenButton.onclick = () => {
            const utterance = new SpeechSynthesisUtterance(`"${conteudo.texto}". ${conteudo.ref}`);
            utterance.lang = 'pt-BR';
            speechSynthesis.speak(utterance);
        };
        
        // Atualiza a ação de copiar
        copyButton.onclick = () => {
             const textoParaCopiar = `"${conteudo.texto}" - ${conteudo.ref}`;
             navigator.clipboard.writeText(textoParaCopiar).then(() => {
                const originalText = copyButton.textContent;
                copyButton.textContent = "Copiado!";
                setTimeout(() => { copyButton.textContent = originalText; }, 2000);
            });
        };
        
        document.body.style.background = `linear-gradient(135deg, #4facfe, #00f2fe)`;
    }

    // Salva a anotação ao digitar
    anotacoesElem.addEventListener('input', () => {
        localStorage.setItem(`anotacao_${displayDay}`, anotacoesElem.value);
    });
    
    // Navegação
    document.getElementById('prev-day-button').addEventListener('click', () => {
        displayDay--;
        mostrarConteudo(displayDay);
    });

    document.getElementById('next-day-button').addEventListener('click', () => {
        displayDay++;
        mostrarConteudo(displayDay);
    });

    // Inicialização
    mostrarConteudo(displayDay);
});
</script>

</body>
</html>
